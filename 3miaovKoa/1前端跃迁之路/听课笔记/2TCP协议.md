### IP协议：
是非常底层的协议，只负责把数据包传送到对方电脑，但是对方电脑并不知道把数据包交给哪个程序，是交给浏览器还是交给王者荣耀？因此，需要基于 IP 之上开发能和应用打交道的协议，最常见的是“用户数据包协议（User Datagram Protocol）”，简称 UDP。


### UDP协议：
把数据包送达应用程序。他最重要的信息是端口号，通过端口号 UDP 就能把指定的数据包发送给指定的程序。所以是通过 IP 地址信息把数据包发送给指定的电脑，而 UDP 通过端口号把数据包分发给正确的程序。但是UDP 不能保证数据可靠性，对于错误的数据包，UDP 并不提供重发机制，只是丢弃当前的包。由于其传输速度非常快，通常会应用在一些关注速度、但不那么严格要求数据完整性的领域，如在线视频、互动游戏等。
- UDP会存在两个比较明显的问题：
    - 数据包在传输过程中容易丢失；
    - 大文件会被拆分成很多小的数据包来传输，这些小的数据包会经过不同的路由，并在不同的时间到达接收端，而 UDP 协议并不知道如何组装这些数据包，从而把这些数据包还原成完整的文件。


### TCP协议：
是一种面向连接的、可靠的、基于字节流的传输层通信协议。
- 基于上面UDP存在的两个问题，TCP存在下面的优点。
    - 对于数据包丢失的情况，TCP 提供重传机制；
    - TCP 引入了数据包排序机制，用来保证把乱序的数据包组合成一个完整的文件。
TCP 头除了包含了目标端口和本机端口号外，还提供了用于排序的序列号，以便接收端通过序号来重排数据包。

一个完整的 TCP 连接的生命周期包括了“建立连接”“传输数据”和“断开连接”三个阶段。
- 建立连接阶段：这个阶段是通过“三次握手”来建立客户端和服务器之间的连接
- 传输数据阶段：接收端需要对每个数据包进行确认操作，也就是接收端在接收到数据包之后，需要发送确认数据包给发送端。所以当发送端发送了一个数据包之后，在规定时间内没有接收到接收端反馈的确认消息，则判断为数据包丢失，并触发发送端的重发机制。同样，一个大的文件在传输过程中会被拆分成很多小的数据包，这些数据包到达接收端后，接收端会按照 TCP 头中的序号为其排序，从而保证组成完整的数据。
- 断开连接阶段：数据传输完毕之后，就要终止连接了，涉及到“四次挥手”来保证双方都能断开连接。

TCP 为了保证数据传输的可靠性，牺牲了数据包的传输速度，因为“三次握手”和“数据包校验机制”等把传输过程中的数据包的数量提高了一倍。


### 问答模块

- 怎么理解 HTTP 和 TCP 的关系
```
HTTP协议和TCP协议都是TCP/IP协议簇的子集。

HTTP协议属于应用层，TCP协议属于传输层，HTTP协议位于TCP协议的上层。

请求方要发送的数据包，在应用层加上HTTP头以后会交给传输层的TCP协议处理，应答方接收到的数据包，在传输层拆掉TCP头以后交给应用层的HTTP协议处理。建立 TCP 连接后会顺序收发数据，请求方和应答方都必须依据 HTTP 规范构建和解析HTTP报文。

经典总结：
（1）tcp是个梯子，http就是利用梯子来搬运货物。
（2）他们的关系可以看成下层为上层提供服务,TCP为HTTP提供差错校验,超时重传的机制吧.
（3）HTTP协议是应用层协议，TCP协议是传输层协议，IP协议是网际协议

```

- 现在的浏览器可以同时打开多个页签，他们端口一样吗？如果一样，数据怎么知道去哪个页签？
```
端口一样的，网络进程知道每个tcp链接所对应的标签是那个，所以接收到数据后，会把数据分发给对应的渲染进程
```

- tcp传送数据时 浏览器端就做渲染处理了么？如果前面数据包丢了 后面数据包先来是要等么？类似的那种实时渲染怎么处理？针对数据包的顺序性？
```
接收到http响应头中的content-type类型时就开始准备渲染进程了，

响应体数据一旦接受到便开始做DOM解析了！

基于http不用担心数据包丢失的问题，因为丢包和重传都是在tcp层解决的。http能保证数据按照顺序接收的！
```


- http 和 websocket都是属于应用层的协议吗？
```
他们都是应用层协议，而且websocket名字取的比较有迷惑性，其实和socket完全不一样，你可以把websocket看出是http的改造版本，增加了服务器向客户端主动发送消息的能力。
```


- 输入url回车后做了哪些事？
```
先通过三次握手建立tcp链接，链接建立好之后，发送http请求行和http请求头给服务器，然后服务器返回响应行，响应头和响应体，最终完成后通过四次挥手断开tcp链接！
```

- 三种协议的理解
```
可以当作平时淘宝购物的流程来分析：
数据包： 我们可以理解为我们买的东西；
TCP/UDP头：买卖人电话、姓名等；
IP头：买卖双方地址；

TCP和UDP不同点在于，TCP可以把大包裹小包裹都给你安全送到，丢件了会给你重发；UDP侧重于小包裹的运送，而且如果丢件了就不管了。

```
