上面讲到渲染的三个过程：构建DOM、样式计算和布局，这一节接着讲渲染未完成的部分。

### 图层树
因为页面中有很多复杂的效果，如一些复杂的 3D 变换、z-index在z轴排序等，为了更加方便地实现这些效果，渲染引擎还需要为特定的节点生成专用的图层，并生成一棵对应的图层树（这里的图层类似ps的图层）

![图层树](https://static001.geekbang.org/resource/image/e8/61/e8a7e60a2a08e05239456284d2aa4061.png)

但并不是布局树的每个节点都包含一个图层，如果一个节点没有对应的层，那么这个节点就从属于父节点的图层。如上图中的 span 标签没有专属图层，那么它们就从属于它们的父节点图层。


那么需要满足什么条件，渲染引擎才会为特定的节点创建新的图层呢？
1、第一点，拥有层叠上下文属性的元素会被提升为单独的一层。
2、



















